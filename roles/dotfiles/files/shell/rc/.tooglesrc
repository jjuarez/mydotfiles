toggles::fzf() {
  if [ $commandx[fzf] ]; then
    [[ -s "${HOME}/.fzf.zsh" ]] && source "${HOME}/.fzf.zsh"
  fi
}

toggles::tfenv() {
  if [ $commands[tfenv] ]; then
    export PATH="${HOME}/.tfenv/bin:${PATH}"
  fi
}

toggles::pyenv() {
  export LDFLAGS="-L/usr/local/opt/zlib/lib -L/usr/local/opt/bzip2/lib"
  export CPPFLAGS="-I/usr/local/opt/zlib/include -I/usr/local/opt/bzip2/include"

  if [ $commands[pyenv] ]; then
    export PYENV_ROOT="${HOME}/.pyenv"
    export PATH="${PYENV_ROOT}/bin:${PATH}"

    eval "$(pyenv init --path)"
  fi
}

toggles::nodenv() {
  if [ $commands[nodenv] ]; then
    eval "$(nodenv init -)"
  fi
}

toggles::rbenv() {
  if [ $commands[rbenv] ]; then
    eval "$(rbenv init -)"
  fi
}

toggles::go() {
  [[ -s "${HOME}/.gorc" ]] && source "${HOME}/.gorc"
}

toggles::rust() {
  [[ -s "${HOME}/.cargo/env" ]] && source "${HOME}/.cargo/env"
}

toggles::github() {
  [[ -s "${HOME}/.githubrc" ]] && source "${HOME}/.githubrc"
}

toggles::ghe() {
  [[ -s "${HOME}/.env.IBM.ghe" ]] && source "${HOME}/.env.IBM.ghe"
}

toggles::travis() {
  [[ -f "${HOME}/.travis/travis.sh" ]] && source "${HOME}/.travis/travis.sh"
}

toggles::direnv() {
  if [ $commands[direnv] ]; then
    eval "$(direnv hook zsh)"
  fi
}

toggles::krew() {
  if [ -d "${HOME}/.krew" ]; then
    export PATH="${PATH}:${HOME}/.krew/bin"
  fi
}

toggles::log() {
  local message="${1}"

  case "${TOGGLES_VERBOSE}" in
    True|true)
      [[ -n "${message}" ]] && echo -en "${message}"
      ;;
  esac
}

main() {
  toggles::log "Toggles: "

  for t activated in ${(kv)TOGGLES_CONFIGURATION}; do
    if [ "${activated}" = true ]; then
      if typeset -f toggles::${t} >/dev/null; then
        toggles::log "${t} " && toggles::${t}
        [[ ${?} -eq 0 ]] && toggles::log "âˆš " || toggles::log "X "
      fi
    fi
  done
  toggles::log "\n"
}

# ::main::
main
